#!/bin/sh

# Pre-commit hook to run format and oxlint

echo "Running format..."
npm run format
FORMAT_EXIT=$?

if [ $FORMAT_EXIT -ne 0 ]; then
  echo "❌ Formatting failed. Please fix formatting issues."
  exit 1
fi

echo "Running oxlint (strict: no warnings allowed)..."
npm run lint -- --max-warnings=0
LINT_EXIT=$?

if [ $LINT_EXIT -ne 0 ]; then
  echo "❌ Linting failed. Please fix linting issues."
  exit 1
fi

echo "✅ Pre-commit checks passed!"
exit 0
